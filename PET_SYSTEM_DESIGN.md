# 🐾 SolaMate 宠物系统设计

## 🎮 核心玩法概念

宠物是你的**数字伙伴**，会根据你的消费习惯和社交活动成长和进化。

---

## 🌟 宠物系统特性

### 1. **宠物等级系统** (Level 1-10)
- 初始等级: Level 1
- 最高等级: Level 10
- 升级方式: 通过活动获得经验值 (XP)

### 2. **宠物属性**
```javascript
{
  pet_id: 1-10,           // 宠物种类
  level: 1-10,            // 等级
  xp: 0-1000,             // 当前经验值
  happiness: 0-100,       // 快乐值
  energy: 0-100,          // 能量值
  last_fed: timestamp,    // 上次喂食时间
  total_interactions: 0,  // 总互动次数
}
```

### 3. **获得经验值的方式**

#### 💰 消费活动 (主要来源)
- 每次转账: +10 XP
- 记录消费: +5 XP
- 完成每日消费目标: +50 XP

#### 👥 社交活动
- 添加好友: +20 XP
- 发送消息: +2 XP
- 接受好友请求: +15 XP

#### 🎯 每日任务
- 发送 5 条消息: +30 XP
- 完成 3 笔转账: +50 XP
- 添加 1 个新好友: +40 XP

#### 🎮 小游戏 (额外玩法)
- 喂食宠物: +5 XP
- 玩耍互动: +10 XP
- 完成小游戏: +25 XP

---

## 🎨 宠物种类 (10 种)

### 1. 🐶 小狗 (Puppy)
- **特性:** 忠诚，社交达人
- **加成:** 好友互动 +20% XP
- **适合:** 喜欢聊天的用户

### 2. 🐱 小猫 (Kitty)
- **特性:** 独立，消费专家
- **加成:** 消费记录 +20% XP
- **适合:** 经常购物的用户

### 3. 🐰 小兔 (Bunny)
- **特性:** 活泼，快速成长
- **加成:** 所有活动 +10% XP
- **适合:** 新手用户

### 4. 🐻 小熊 (Bear)
- **特性:** 稳重，储蓄高手
- **加成:** 大额转账 +30% XP
- **适合:** 高消费用户

### 5. 🐦 小鸟 (Bird)
- **特性:** 自由，消息达人
- **加成:** 发送消息 +50% XP
- **适合:** 聊天狂人

### 6. 🐠 小鱼 (Fish)
- **特性:** 平静，稳定收益
- **加成:** 每日登录 +20 XP
- **适合:** 佛系用户

### 7. 🐉 小龙 (Dragon)
- **特性:** 强大，稀有加成
- **加成:** 所有活动 +15% XP
- **适合:** 重度用户

### 8. 🐵 小猴 (Monkey)
- **特性:** 聪明，任务专家
- **加成:** 完成任务 +40% XP
- **适合:** 目标导向用户

### 9. 🐷 小猪 (Pig)
- **特性:** 可爱，幸运加成
- **加成:** 随机双倍 XP (10% 概率)
- **适合:** 喜欢惊喜的用户

### 10. 🦊 小狐狸 (Fox)
- **特性:** 狡猾，全能型
- **加成:** 所有分类消费 +10% XP
- **适合:** 全面发展用户

---

## 📊 等级系统

### 升级所需经验值
```javascript
const XP_REQUIRED = {
  1: 0,      // Level 1 (起始)
  2: 100,    // Level 2
  3: 250,    // Level 3
  4: 500,    // Level 4
  5: 1000,   // Level 5
  6: 2000,   // Level 6
  7: 3500,   // Level 7
  8: 5500,   // Level 8
  9: 8000,   // Level 9
  10: 12000, // Level 10 (最高)
}
```

### 等级奖励
- **Level 2:** 解锁宠物喂食功能
- **Level 3:** 解锁宠物装饰 (帽子、眼镜)
- **Level 5:** 解锁宠物小游戏
- **Level 7:** 解锁宠物皮肤变化
- **Level 10:** 解锁专属称号 + 特殊动画

---

## 🎮 互动玩法

### 1. **喂食系统** (每 6 小时一次)
```
用户点击 "喂食" → 宠物快乐值 +10 → 获得 5 XP
如果超过 12 小时未喂食 → 快乐值 -20
```

**UI 设计:**
```
┌─────────────────────────┐
│   🐶 Your Puppy         │
│   Level 3 | XP: 450/500 │
├─────────────────────────┤
│   [GIF 动画]            │
│                         │
│   ❤️ Happiness: 85/100  │
│   ⚡ Energy: 70/100     │
├─────────────────────────┤
│   [🍖 Feed] [🎮 Play]   │
└─────────────────────────┘
```

### 2. **玩耍互动** (每 4 小时一次)
```
用户点击 "玩耍" → 播放互动动画 → 获得 10 XP
宠物会做出不同反应 (摇尾巴、跳跃、转圈)
```

### 3. **小游戏** (Level 5 解锁)

#### 游戏 1: 猜数字
```
宠物想一个 1-10 的数字
用户猜 3 次
猜对 → +25 XP
```

#### 游戏 2: 点击喂食
```
食物从上方掉落
点击接住食物
接住 10 个 → +30 XP
```

#### 游戏 3: 记忆卡片
```
翻开卡片配对
完成配对 → +20 XP
```

---

## 🏆 成就系统

### 宠物成就
- 🌟 **新手训练师:** 宠物达到 Level 3
- 🌟 **资深训练师:** 宠物达到 Level 7
- 🌟 **大师训练师:** 宠物达到 Level 10
- 🌟 **社交达人:** 添加 10 个好友
- 🌟 **消费专家:** 完成 100 笔转账
- 🌟 **聊天狂人:** 发送 1000 条消息
- 🌟 **全能玩家:** 解锁所有宠物

### 成就奖励
- 显示在个人档案
- 解锁特殊宠物装饰
- 获得称号 (显示在用户名旁边)

---

## 🎨 UI/UX 设计

### 宠物页面布局
```
┌─────────────────────────────────────┐
│  🏠 Home  👥 Friends  🐾 Pet  💰 Expenses │
├─────────────────────────────────────┤
│                                     │
│        [宠物 GIF 动画]              │
│        Level 5 | XP: 1200/2000      │
│        ████████░░░░░░░░ 60%         │
│                                     │
│  ❤️ Happiness: 85/100               │
│  ⚡ Energy: 70/100                  │
│                                     │
│  [🍖 Feed (4h)] [🎮 Play (2h)]     │
│  [🎯 Daily Tasks] [🏆 Achievements] │
│                                     │
├─────────────────────────────────────┤
│  📊 Stats                           │
│  Total XP: 1200                     │
│  Total Interactions: 45             │
│  Days Active: 7                     │
│                                     │
│  🎮 Mini Games (Level 5+)           │
│  [Guess Number] [Catch Food]        │
└─────────────────────────────────────┘
```

### 导航栏宠物显示
```
┌─────────────────────────────────────┐
│  SolaMate  [Home] [Chat] [Friends]  │
│                                      │
│  [Balance] [🔔] [👤 🐶 Lv.5]       │
└─────────────────────────────────────┘
```
宠物图标显示在头像旁边，点击跳转到宠物页面

---

## 🔄 完整用户流程

### 首次选择宠物
```
1. 用户连接钱包
2. 创建档案
3. 进入宠物选择页面
4. 显示 10 个宠物 + 特性说明
5. 用户选择宠物
6. 调用 select_pet(pet_id)
7. 初始化宠物属性 (Level 1, XP 0)
8. 显示欢迎动画
9. 引导完成首个任务
```

### 日常互动
```
1. 用户登录
2. 宠物在导航栏显示
3. 如果快乐值 < 50 → 显示提示 "宠物饿了！"
4. 用户点击宠物图标
5. 进入宠物页面
6. 喂食/玩耍
7. 查看每日任务
8. 完成任务获得 XP
9. 宠物升级 → 播放升级动画
```

### 升级流程
```
1. 用户完成活动 (转账/聊天/任务)
2. 获得 XP
3. XP 达到升级要求
4. 播放升级动画 🎉
5. 显示 "Level Up! Level 3 → Level 4"
6. 解锁新功能提示
7. 宠物外观变化 (更大/更亮)
```

---

## 💾 数据存储

### 链上存储 (Solana)
```rust
pub struct PetData {
    pub owner: Pubkey,
    pub pet_id: u8,           // 1-10
    pub level: u8,            // 1-10
    pub xp: u32,              // 当前经验值
    pub total_xp: u32,        // 总经验值
    pub happiness: u8,        // 0-100
    pub energy: u8,           // 0-100
    pub last_fed: i64,        // 上次喂食时间
    pub last_played: i64,     // 上次玩耍时间
    pub total_interactions: u32,
    pub created_at: i64,
    pub bump: u8,
}
```

### 链下缓存 (Firebase)
```javascript
{
  userId: "wallet_address",
  petStats: {
    dailyXP: 150,
    weeklyXP: 800,
    achievements: ["newbie", "social_master"],
    lastLogin: "2025-12-05T10:30:00Z"
  }
}
```

---

## 🎯 每日任务系统

### 任务列表
```javascript
const DAILY_TASKS = [
  {
    id: 1,
    title: "发送 5 条消息",
    reward: 30,
    progress: "3/5",
    completed: false
  },
  {
    id: 2,
    title: "完成 3 笔转账",
    reward: 50,
    progress: "1/3",
    completed: false
  },
  {
    id: 3,
    title: "喂食宠物",
    reward: 10,
    progress: "0/1",
    completed: false
  }
]
```

### 任务 UI
```
┌─────────────────────────────────────┐
│  📋 Daily Tasks                     │
├─────────────────────────────────────┤
│  ✅ 发送 5 条消息 (5/5) +30 XP     │
│  ⏳ 完成 3 笔转账 (1/3) +50 XP     │
│  ⏳ 喂食宠物 (0/1) +10 XP          │
│                                     │
│  Progress: 1/3 tasks completed      │
│  Total Rewards: 90 XP               │
└─────────────────────────────────────┘
```

---

## 🎨 宠物动画效果

### 状态动画
- **闲置:** 轻微摇摆
- **快乐:** 跳跃 + 星星特效
- **饥饿:** 低头 + 汗滴
- **升级:** 发光 + 旋转 + 烟花

### 互动动画
- **喂食:** 吃东西动画 + ❤️ 冒出
- **玩耍:** 转圈 + 🎵 音符
- **升级:** 光芒四射 + 🎉 庆祝

---

## 🔮 未来扩展

### Phase 2 功能
- 🎁 **宠物装饰:** 帽子、眼镜、衣服
- 🏠 **宠物之家:** 自定义背景
- 👥 **宠物对战:** 好友间 PK
- 🛒 **宠物商店:** 用 SOL 购买道具
- 🏆 **排行榜:** 全球宠物等级排名

### Phase 3 功能
- 🧬 **宠物繁殖:** 两只宠物生成新宠物
- 🎨 **NFT 化:** 宠物变成 NFT
- 💱 **宠物交易:** 市场买卖宠物
- 🌍 **宠物社区:** 宠物社交网络

---

## 📊 数据分析

### 追踪指标
- 用户宠物选择分布
- 平均宠物等级
- 每日活跃互动次数
- 任务完成率
- 小游戏参与率

---

## 🎯 商业化潜力

### 收入来源
1. **宠物装饰 NFT:** 限量版皮肤
2. **高级宠物:** 稀有宠物需要购买
3. **加速道具:** 快速升级
4. **宠物商店:** 虚拟商品

---

## 🚀 实现优先级

### MVP (最小可行产品)
- ✅ 选择宠物 (10 种)
- ✅ 等级系统 (1-10)
- ✅ 经验值获取 (转账/聊天)
- ✅ 喂食/玩耍互动
- ✅ 宠物页面 UI

### Phase 1
- ⏭️ 每日任务系统
- ⏭️ 成就系统
- ⏭️ 小游戏 (3 个)

### Phase 2
- ⏭️ 宠物装饰
- ⏭️ 排行榜
- ⏭️ 宠物对战

---

**这个宠物系统会让用户每天都想回来互动，增加用户粘性和活跃度！🐾**
